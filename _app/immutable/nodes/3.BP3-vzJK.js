import"../chunks/DsnmJJEf.js";import{i as ws}from"../chunks/BxX_HEZv.js";import{o as ks,s as I}from"../chunks/Zv3zR120.js";import{t as Z,h as Ie,D as Le,a3 as Cs,al as Ms,S as Ve,am as Is,an as xs,ao as Ps,ap as Ss,aq as Be,I as Rs,ar as Ds,as as de,at as Es,e as d,V as Ys,$ as As,Y as Os,p as We,m as u,v as a,au as Fe,w as t,o as f,s as Ze,X as Y,av as Ge,aw as Hs,z as Ns,i as e,x as o,_ as k,aj as Us,n as qs,j as ve}from"../chunks/DDil9mjz.js";import{p as Ls,a as Ce,i as g,s as Vs,c as Je}from"../chunks/BsKVOY7M.js";import{b as ee,M as Bs,p as Xe,m as Ke,g as ne,a as ce,s as Fs,e as Q,d as Gs,i as W,S as Js,P as be}from"../chunks/AkLXof38.js";import{r as Xs,s as Ks}from"../chunks/DwKdpf59.js";import{b as Me}from"../chunks/DV33PA8e.js";import{s as Qs}from"../chunks/DO1A9S9U.js";function Qe(l,_,z=!1,b=!1,q=!1){var $=l,C="";Z(()=>{var M=Cs;if(C===(C=_()??"")){Ie&&Le();return}if(M.nodes_start!==null&&(Ms(M.nodes_start,M.nodes_end),M.nodes_start=M.nodes_end=null),C!==""){if(Ie){Ve.data;for(var p=Le(),L=p;p!==null&&(p.nodeType!==Is||p.data!=="");)L=p,p=xs(p);if(p===null)throw Ps(),Ss;Be(Ve,L),$=Rs(p);return}var x=C+"";z?x=`<svg>${x}</svg>`:b&&(x=`<math>${x}</math>`);var T=Ds(x);if((z||b)&&(T=de(T)),Be(de(T),T.lastChild),z||b)for(;de(T);)$.before(de(T));else $.before(T)}})}function Ws(l,_,z=_){Es(l,"change",b=>{var q=b?l.defaultChecked:l.checked;z(q)}),(Ie&&l.defaultChecked!==l.checked||d(_)==null)&&z(l.checked),Ys(()=>{var b=_();l.checked=!!b})}function Zs(l,_,z){var b=As(l,_);b&&b.set&&(l[_]=z,Os(()=>{l[_]=null}))}const et=()=>{const l=Qs;return{page:{subscribe:l.page.subscribe},navigating:{subscribe:l.navigating.subscribe},updated:l.updated}},st={subscribe(l){return et().page.subscribe(l)}};var tt=u('<div class="switch-container svelte-128hqhb"><label class="switch svelte-128hqhb"><input type="checkbox" class="svelte-128hqhb"/> <span class="slider svelte-128hqhb"></span></label> <span>Autoplay</span></div>');function at(l,_){We(_,!1);let z=Ls(_,"checked",12,!1);const b="#646cff";var q={color:b},$=tt(),C=a($);ee(C,"--switch-color: #646cff;");var M=a(C);return Xs(M),Fe(2),t(C),Fe(2),t($),Ws(M,z),f(l,$),Zs(_,"color",b),Ze(q)}var rt=u('<div class="DNA_cont svelte-1jobjz3"><div class="nucleobase svelte-1jobjz3"></div> <div class="nucleobase svelte-1jobjz3"></div> <div class="nucleobase svelte-1jobjz3"></div> <div class="nucleobase svelte-1jobjz3"></div> <div class="nucleobase svelte-1jobjz3"></div> <div class="nucleobase svelte-1jobjz3"></div> <div class="nucleobase svelte-1jobjz3"></div> <div class="nucleobase svelte-1jobjz3"></div> <div class="nucleobase svelte-1jobjz3"></div> <div class="nucleobase svelte-1jobjz3"></div></div>'),ot=u('<div id="player" class="svelte-1jobjz3"></div>'),it=u('<div class="objectives svelte-1jobjz3"><strong class="svelte-1jobjz3">Objectifs :</strong> <div class="svelte-1jobjz3"><!></div></div>'),lt=u('<tr class="svelte-1jobjz3"><td class="role-label svelte-1jobjz3">Mod√©rateur :</td><td class="svelte-1jobjz3"></td></tr>'),dt=u('<tr class="svelte-1jobjz3"><td class="role-label svelte-1jobjz3">Responsable :</td><td class="svelte-1jobjz3"></td></tr>'),vt=u('<table class="person-list svelte-1jobjz3"><tbody class="svelte-1jobjz3"><!><!></tbody></table>'),nt=u('<div class="media svelte-1jobjz3"><div class="current-media svelte-1jobjz3"><div id="current-media-info" class="svelte-1jobjz3"><div class="svelte-1jobjz3"><strong class="svelte-1jobjz3"> </strong></div> <!></div> <div id="video-container" class="svelte-1jobjz3"><!></div> <div class="detail screen-big svelte-1jobjz3"><div class="session-header svelte-1jobjz3"><div class="session-type svelte-1jobjz3"> </div> <h1 class="svelte-1jobjz3"> </h1> <div class="date-time subtitle svelte-1jobjz3"><div class="svelte-1jobjz3"> </div> <div class="svelte-1jobjz3"> </div></div></div> <!> <!></div></div> <div class="playlist-container svelte-1jobjz3"><div id="playlist-title" class="svelte-1jobjz3"><strong class="svelte-1jobjz3"> </strong> <!></div> <div class="playlist svelte-1jobjz3"></div></div></div>'),ct=u('<div class="objectives svelte-1jobjz3"><strong class="svelte-1jobjz3">Objectifs :</strong> <div class="svelte-1jobjz3"><!></div></div>'),bt=u('<tr class="svelte-1jobjz3"><td class="role-label svelte-1jobjz3">Mod√©rateur :</td><td class="svelte-1jobjz3"></td></tr>'),jt=u('<tr class="svelte-1jobjz3"><td class="role-label svelte-1jobjz3">Responsable :</td><td class="svelte-1jobjz3"></td></tr>'),_t=u('<table class="person-list svelte-1jobjz3"><tbody class="svelte-1jobjz3"><!><!></tbody></table>'),ft=u('<!> <div><div class="session-header svelte-1jobjz3"><div class="session-type svelte-1jobjz3"> </div> <h1 class="svelte-1jobjz3"> </h1> <div class="date-time subtitle svelte-1jobjz3"><div class="svelte-1jobjz3"> </div> <div class="svelte-1jobjz3"> </div></div></div> <!> <!></div>',1),ut=u('<main class="svelte-1jobjz3"><div id="navbar" class="svelte-1jobjz3"><a class="one-liner svelte-1jobjz3"><i class="gg-chevron-left svelte-1jobjz3"></i> Retour</a> <!></div> <!> <!></main>');function kt(l,_){We(_,!1);const z=()=>Ce(st,"$page",$),b=()=>Ce(Xe,"$prefs",$),q=()=>Ce(Ke,"$mediaHistory",$),[$,C]=Vs(),M=25,p=z().url.searchParams;let L,x;p&&(L=p.get("id"),x=p.get("media-url"));let T=Y(!0),xe,s=Y(),B=Y(),A=Y(),O=Y(),V,c=Y(),se,F=Y(b()?.autoplay??!1),j=Y([]);const te=(i,v)=>{if(!v)return v;const r=v.split("/video/")[0].split("/").pop();return r&&r in i?`https://www.youtube.com/embed/${i[r]}`:v};ks(async()=>{xe=await(await fetch(`${Me}/json/${L}.json`)).json(),k(s,xe.data.event),k(B,e(s).objectives.map(r=>`<div class="objectives-value">${r}</div>`).join("")),k(A,e(s).roles.find(r=>r.name==="mod√©rateur")?.assignees.items),k(O,e(s).roles.find(r=>r.name==="responsable")?.assignees.items);const v=await(await fetch(`${Me}/json/yt-video-mapping.json`)).json();for(const r of e(s).schedule.items)r.vod&&r.vod.media&&r.vod.media.element&&r.vod.media.element.sources&&e(j).push({id:r.vod.media.id,title:r.vod.media.id?r.title:`${r.title} ‚ìÇÔ∏è`,hdUrl:te(v,r.vod.media.element.sources[0].uri),url:te(v,r.vod.media.element.sources[1]?.uri),thumbnail:r.vod.media.thumbnail,start:r.start.split("T")[1].split("+")[0],speakers:r.speakers.items});e(s).vod&&e(s).vod.media&&e(s).vod.media.element&&e(s).vod.media.element.sources&&e(j).push({id:e(s).vod.media.id,title:e(s).vod.media.title??"[Sans titre]",hdUrl:te(v,e(s).vod.media.element.sources[0].uri),url:te(v,e(s).vod.media.element.sources[1]?.uri),thumbnail:e(s).vod.media.thumbnail,start:e(s).start.split("T")[1].split("+")[0],speakers:e(s).speakers.items}),k(j,e(j).toSorted((r,H)=>r.start.localeCompare(H.start))),e(j).length>0&&(x&&(se=k(c,e(j).find(r=>r.hdUrl===x))),e(c)||(se=k(c,e(j)[0]))),k(T,!1);{window.onYouTubeIframeAPIReady=()=>{const H=e(c).hdUrl.split("/").pop();V=new YT.Player("player",{videoId:H,playerVars:{modestbranding:1,playsinline:1,controls:2,autoplay:e(F)?1:0,rel:0},events:{onStateChange:es}})};const r=document.createElement("script");return r.src="https://www.youtube.com/iframe_api",document.body.appendChild(r),()=>{V&&V.destroy&&V.destroy(),delete window.onYouTubeIframeAPIReady}}});const es=i=>{i.data===YT.PlayerState.PLAYING?Se(e(c)):i.data===YT.PlayerState.ENDED&&ss(e(c))},Pe=i=>{if(!V||!i||i===se)return;const v=i.hdUrl.split("/").pop();V.loadVideoById(v),Se(i),se=i},Se=i=>{const v=q().filter(H=>H.hdUrl!==i.hdUrl),r=structuredClone(i);r.sessionId=L,r.sessionTitle=e(s).title,r.sessionTypeColor=e(s).sessionTypeColor!=="#000000"?e(s).sessionTypeColor:"#dfdfdf",Je(Ke,[r,...v].slice(0,M))},ss=i=>{if(!b().autoplay)return;const v=e(j).indexOf(i);v<e(j).length-1&&(k(c,e(j)[v+1]),Pe(e(c)))};Ge(()=>(b(),e(F)),()=>{b()&&Je(Xe,{autoplay:e(F)})}),Ge(()=>e(c),()=>{e(c),Pe(e(c))}),Hs(),ws();var je=ut();Ns(i=>{Z(()=>Us.title=(e(s),d(()=>e(s)?e(s).title:"JFR 2025")??""))});var _e=a(je),Re=a(_e),ts=o(Re,2);Bs(ts),t(_e);var De=o(_e,2);{var as=i=>{var v=rt();f(i,v)};g(De,i=>{e(T)&&i(as)})}var rs=o(De,2);{var os=i=>{var v=ft(),r=qs(v);{var H=m=>{var h=nt(),w=a(h),E=a(w),G=a(E),oe=a(G),me=a(oe,!0);t(oe),t(G);var P=o(G,2);{var S=n=>{Js(n,{get speakers(){return e(c),d(()=>e(c).speakers)}})};g(P,n=>{e(c),d(()=>e(c).speakers)&&n(S)})}t(E);var R=o(E,2),J=a(R);{var X=n=>{var y=ot();f(n,y)};g(J,n=>{n(X)})}t(R);var he=o(R,2),ye=a(he),ie=a(ye),js=a(ie,!0);t(ie);var ge=o(ie,2),_s=a(ge,!0);t(ge);var Oe=o(ge,2),ze=a(Oe),fs=a(ze);t(ze);var He=o(ze,2),us=a(He);t(He),t(Oe),t(ye);var Ne=o(ye,2);{var ps=n=>{var y=it(),D=o(a(y),2),le=a(D);Qe(le,()=>e(B)),t(D),t(y),f(n,y)};g(Ne,n=>{e(B)&&n(ps)})}var ms=o(Ne,2);{var hs=n=>{var y=vt(),D=a(y),le=a(D);{var zs=N=>{var U=lt(),K=o(a(U));Q(K,5,()=>e(A),W,(we,ke)=>{be(we,{get info(){return e(ke)}})}),t(K),t(U),f(N,U)};g(le,N=>{e(A)&&N(zs)})}var $s=o(le);{var Ts=N=>{var U=dt(),K=o(a(U));Q(K,5,()=>e(O),W,(we,ke)=>{be(we,{get info(){return e(ke)}})}),t(K),t(U),f(N,U)};g($s,N=>{e(O)&&N(Ts)})}t(D),t(y),f(n,y)};g(ms,n=>{(e(A)||e(O))&&n(hs)})}t(he),t(w);var Ue=o(w,2),$e=a(Ue),Te=a($e),ys=a(Te);t(Te);var gs=o(Te,2);at(gs,{get checked(){return e(F)},set checked(n){k(F,n)},$$legacy:!0}),t($e);var qe=o($e,2);Q(qe,5,()=>e(j),W,(n,y)=>{Gs(n,{get media(){return e(y)},downloadable:!0,get currentMedia(){return e(c)},set currentMedia(D){k(c,D)},$$legacy:!0})}),t(qe),t(Ue),t(h),Z((n,y,D)=>{I(me,(e(c),d(()=>e(c).title??"üò∂‚Äçüå´Ô∏è"))),ee(he,`border-left-color: ${e(s),d(()=>e(s).sessionTypeColor)??""}`),ee(ie,`color: ${e(s),d(()=>e(s).sessionTypeColor!=="#000000"?e(s).sessionTypeColor:"#dfdfdf")??""}`),I(js,(e(s),d(()=>e(s).sessionType))),I(_s,(e(s),d(()=>e(s).title))),I(fs,`üóìÔ∏è ${n??""}`),I(us,`${y??""}
									${D??""}`),I(ys,`Liste de lecture (${e(j),d(()=>e(j).length)??""}):`)},[()=>(ve(ne),e(s),d(()=>ne(e(s).start?.split("T")[0]))),()=>(ve(ce),e(s),d(()=>ce(e(s).start?.split("T")[1].split("+")[0]))),()=>(e(s),d(()=>e(s).start?.split("T")[1].split("+")[0]+" - "+e(s).end?.split("T")[1].split("+")[0]))]),f(m,h)};g(r,m=>{e(j),d(()=>e(j).length>0)&&m(H)})}var ae=o(r,2),fe=a(ae),re=a(fe),is=a(re,!0);t(re);var ue=o(re,2),ls=a(ue,!0);t(ue);var Ee=o(ue,2),pe=a(Ee),ds=a(pe);t(pe);var Ye=o(pe,2),vs=a(Ye);t(Ye),t(Ee),t(fe);var Ae=o(fe,2);{var ns=m=>{var h=ct(),w=o(a(h),2),E=a(w);Qe(E,()=>e(B)),t(w),t(h),f(m,h)};g(Ae,m=>{e(B)&&m(ns)})}var cs=o(Ae,2);{var bs=m=>{var h=_t(),w=a(h),E=a(w);{var G=P=>{var S=bt(),R=o(a(S));Q(R,5,()=>e(A),W,(J,X)=>{be(J,{get info(){return e(X)}})}),t(R),t(S),f(P,S)};g(E,P=>{e(A)&&P(G)})}var oe=o(E);{var me=P=>{var S=jt(),R=o(a(S));Q(R,5,()=>e(O),W,(J,X)=>{be(J,{get info(){return e(X)}})}),t(R),t(S),f(P,S)};g(oe,P=>{e(O)&&P(me)})}t(w),t(h),f(m,h)};g(cs,m=>{(e(A)||e(O))&&m(bs)})}t(ae),Z((m,h,w)=>{Fs(ae,1,`detail screen-small ${e(j),d(()=>e(j).length==0?"no-media":"")??""}`,"svelte-1jobjz3"),ee(ae,`border-left-color: ${e(s),d(()=>e(s).sessionTypeColor)??""}`),ee(re,`color: ${e(s),d(()=>e(s).sessionTypeColor!=="#000000"?e(s).sessionTypeColor:"#dfdfdf")??""}`),I(is,(e(s),d(()=>e(s).sessionType))),I(ls,(e(s),d(()=>e(s).title))),I(ds,`üóìÔ∏è ${m??""}`),I(vs,`${h??""}
						${w??""}`)},[()=>(ve(ne),e(s),d(()=>ne(e(s).start?.split("T")[0]))),()=>(ve(ce),e(s),d(()=>ce(e(s).start?.split("T")[1].split("+")[0]))),()=>(e(s),d(()=>e(s).start?.split("T")[1].split("+")[0]+" - "+e(s).end?.split("T")[1].split("+")[0]))]),f(i,v)};g(rs,i=>{!e(T)&&e(s)&&i(os)})}t(je),Z(()=>Ks(Re,"href",`${Me??""}/`)),f(l,je),Ze(),C()}export{kt as component};
