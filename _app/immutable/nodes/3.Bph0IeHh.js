import"../chunks/DsnmJJEf.js";import{i as gs}from"../chunks/BxX_HEZv.js";import{o as ys,s as w,e as He}from"../chunks/Zv3zR120.js";import{t as W,h as ke,D as qe,a3 as $s,al as Ts,S as Ae,am as ks,an as Ms,ao as Cs,ap as ws,aq as Pe,I as xs,ar as Is,as as re,at as Rs,e as o,V as Ss,$ as Ds,Y as Os,p as Ve,m,v as a,au as Ne,w as t,o as p,s as Xe,X as H,av as Us,aw as Es,z as Hs,i as e,x as i,_ as k,aj as qs,n as As,j as ie}from"../chunks/DDil9mjz.js";import{p as Ps,a as $e,i as z,s as Ns,c as Be}from"../chunks/BsKVOY7M.js";import{b as Z,M as Bs,p as Le,g as oe,a as le,s as Ls,e as K,d as Ys,i as Q,m as Ye,S as Fs,P as ve}from"../chunks/Buw2dX1M.js";import{r as Js,s as Te}from"../chunks/DwKdpf59.js";import{b as Fe}from"../chunks/ChRkkON5.js";import{s as Vs}from"../chunks/BLS_JuAP.js";function Je(l,j,h=!1,v=!1,L=!1){var g=l,M="";W(()=>{var C=$s;if(M===(M=j()??"")){ke&&qe();return}if(C.nodes_start!==null&&(Ts(C.nodes_start,C.nodes_end),C.nodes_start=C.nodes_end=null),M!==""){if(ke){Ae.data;for(var _=qe(),Y=_;_!==null&&(_.nodeType!==ks||_.data!=="");)Y=_,_=Ms(_);if(_===null)throw Cs(),ws;Pe(Ae,Y),g=xs(_);return}var x=M+"";h?x=`<svg>${x}</svg>`:v&&(x=`<math>${x}</math>`);var y=Is(x);if((h||v)&&(y=re(y)),Pe(re(y),y.lastChild),h||v)for(;re(y);)g.before(re(y));else g.before(y)}})}function Xs(l,j,h=j){Rs(l,"change",v=>{var L=v?l.defaultChecked:l.checked;h(L)}),(ke&&l.defaultChecked!==l.checked||o(j)==null)&&h(l.checked),Ss(()=>{var v=j();l.checked=!!v})}function Gs(l,j,h){var v=Ds(l,j);v&&v.set&&(l[j]=h,Os(()=>{l[j]=null}))}const Ks=()=>{const l=Vs;return{page:{subscribe:l.page.subscribe},navigating:{subscribe:l.navigating.subscribe},updated:l.updated}},Qs={subscribe(l){return Ks().page.subscribe(l)}};var Ws=m('<div class="switch-container svelte-128hqhb"><label class="switch svelte-128hqhb"><input type="checkbox" class="svelte-128hqhb"/> <span class="slider svelte-128hqhb"></span></label> <span>Autoplay</span></div>');function Zs(l,j){Ve(j,!1);let h=Ps(j,"checked",12,!1);const v="#646cff";var L={color:v},g=Ws(),M=a(g);Z(M,"--switch-color: #646cff;");var C=a(M);return Js(C),Ne(2),t(M),Ne(2),t(g),Xs(C,h),p(l,g),Gs(j,"color",v),Xe(L)}var et=m('<div class="DNA_cont svelte-1jobjz3"><div class="nucleobase svelte-1jobjz3"></div> <div class="nucleobase svelte-1jobjz3"></div> <div class="nucleobase svelte-1jobjz3"></div> <div class="nucleobase svelte-1jobjz3"></div> <div class="nucleobase svelte-1jobjz3"></div> <div class="nucleobase svelte-1jobjz3"></div> <div class="nucleobase svelte-1jobjz3"></div> <div class="nucleobase svelte-1jobjz3"></div> <div class="nucleobase svelte-1jobjz3"></div> <div class="nucleobase svelte-1jobjz3"></div></div>'),st=m('<div class="objectives svelte-1jobjz3"><strong class="svelte-1jobjz3">Objectifs :</strong> <div class="svelte-1jobjz3"><!></div></div>'),tt=m('<tr class="svelte-1jobjz3"><td class="role-label svelte-1jobjz3">Mod√©rateur :</td><td class="svelte-1jobjz3"></td></tr>'),at=m('<tr class="svelte-1jobjz3"><td class="role-label svelte-1jobjz3">Responsable :</td><td class="svelte-1jobjz3"></td></tr>'),rt=m('<table class="person-list svelte-1jobjz3"><tbody class="svelte-1jobjz3"><!><!></tbody></table>'),it=m('<div class="media svelte-1jobjz3"><div class="current-media svelte-1jobjz3"><div id="current-media-info" class="svelte-1jobjz3"><div class="svelte-1jobjz3"><strong class="svelte-1jobjz3"> </strong></div> <!></div> <div id="video-container" class="svelte-1jobjz3"><video controls class="video-player svelte-1jobjz3"><track kind="captions" class="svelte-1jobjz3"/></video></div> <div class="detail screen-big svelte-1jobjz3"><div class="session-header svelte-1jobjz3"><div class="session-type svelte-1jobjz3"> </div> <h1 class="svelte-1jobjz3"> </h1> <div class="date-time subtitle svelte-1jobjz3"><div class="svelte-1jobjz3"> </div> <div class="svelte-1jobjz3"> </div></div></div> <!> <!></div></div> <div class="playlist-container svelte-1jobjz3"><div id="playlist-title" class="svelte-1jobjz3"><strong class="svelte-1jobjz3"> </strong> <!></div> <div class="playlist svelte-1jobjz3"></div></div></div>',2),ot=m('<div class="objectives svelte-1jobjz3"><strong class="svelte-1jobjz3">Objectifs :</strong> <div class="svelte-1jobjz3"><!></div></div>'),lt=m('<tr class="svelte-1jobjz3"><td class="role-label svelte-1jobjz3">Mod√©rateur :</td><td class="svelte-1jobjz3"></td></tr>'),vt=m('<tr class="svelte-1jobjz3"><td class="role-label svelte-1jobjz3">Responsable :</td><td class="svelte-1jobjz3"></td></tr>'),dt=m('<table class="person-list svelte-1jobjz3"><tbody class="svelte-1jobjz3"><!><!></tbody></table>'),nt=m('<!> <div><div class="session-header svelte-1jobjz3"><div class="session-type svelte-1jobjz3"> </div> <h1 class="svelte-1jobjz3"> </h1> <div class="date-time subtitle svelte-1jobjz3"><div class="svelte-1jobjz3"> </div> <div class="svelte-1jobjz3"> </div></div></div> <!> <!></div>',1),ct=m('<main class="svelte-1jobjz3"><div id="navbar" class="svelte-1jobjz3"><a class="one-liner svelte-1jobjz3"><i class="gg-chevron-left svelte-1jobjz3"></i> Retour</a> <!></div> <!> <!></main>');function gt(l,j){Ve(j,!1);const h=()=>$e(Qs,"$page",g),v=()=>$e(Le,"$prefs",g),L=()=>$e(Ye,"$mediaHistory",g),[g,M]=Ns(),C=25,_=h().url.searchParams;let Y,x;_&&(Y=_.get("id"),x=_.get("media-url"));let y=H(!0),Me,s=H(),J=H(),q=H(),A=H(),d=H(),V=H(v()?.autoplay??!1),c=H([]);const Ge=n=>screen.width<=1024&&n.url?n.url:n.hdUrl;ys(async()=>{Me=await(await fetch(`${Fe}/json/${Y}.json`)).json(),k(s,Me.data.event),k(J,e(s).objectives.map(r=>`<div class="objectives-value">${r}</div>`).join("")),k(q,e(s).roles.find(r=>r.name==="mod√©rateur")?.assignees.items),k(A,e(s).roles.find(r=>r.name==="responsable")?.assignees.items);for(const r of e(s).schedule.items)r.vod&&r.vod.media&&r.vod.media.element&&r.vod.media.element.sources&&e(c).push({id:r.vod.media.id,title:r.vod.media.id?r.title:`${r.title} ‚ìÇÔ∏è`,hdUrl:r.vod.media.element.sources[0].uri,url:r.vod.media.element.sources[1]?.uri,thumbnail:r.vod.media.thumbnail,start:r.start.split("T")[1].split("+")[0],speakers:r.speakers.items});e(s).vod&&e(s).vod.media&&e(s).vod.media.element&&e(s).vod.media.element.sources&&e(c).push({id:e(s).vod.media.id,title:e(s).vod.media.title??"[Sans titre]",hdUrl:e(s).vod.media.element.sources[0].uri,url:e(s).vod.media.element.sources[1]?.uri,thumbnail:e(s).vod.media.thumbnail,start:e(s).start.split("T")[1].split("+")[0],speakers:e(s).speakers.items}),k(c,e(c).toSorted((r,I)=>r.start.localeCompare(I.start))),e(c).length>0&&(x&&k(d,e(c).find(r=>r.hdUrl===x)),e(d)||k(d,e(c)[0])),k(y,!1)});const Ke=n=>{const r=L().filter(ce=>ce.hdUrl!==n.hdUrl),I=structuredClone(n);I.sessionId=Y,I.sessionTitle=e(s).title,I.sessionTypeColor=e(s).sessionTypeColor!=="#000000"?e(s).sessionTypeColor:"#dfdfdf",Be(Ye,[I,...r].slice(0,C))},Qe=n=>{if(!v().autoplay)return;const r=e(c).indexOf(n);r<e(c).length-1&&k(d,e(c)[r+1])};Us(()=>(v(),e(V)),()=>{v()&&Be(Le,{autoplay:e(V)})}),Es(),gs();var de=ct();Hs(n=>{W(()=>qs.title=(e(s),o(()=>e(s)?e(s).title:"JFR 2025")??""))});var ne=a(de),Ce=a(ne),We=i(Ce,2);Bs(We),t(ne);var we=i(ne,2);{var Ze=n=>{var r=et();p(n,r)};z(we,n=>{e(y)&&n(Ze)})}var es=i(we,2);{var ss=n=>{var r=nt(),I=As(r);{var ce=f=>{var u=it(),$=a(u),E=a($),X=a(E),te=a(X),fe=a(te,!0);t(te),t(X);var R=i(X,2);{var S=b=>{Fs(b,{get speakers(){return e(d),o(()=>e(d).speakers)}})};z(R,b=>{e(d),o(()=>e(d).speakers)&&b(S)})}t(E);var D=i(E,2),O=a(D);t(D);var P=i(D,2),ue=a(P),ae=a(ue),ds=a(ae,!0);t(ae);var pe=i(ae,2),ns=a(pe,!0);t(pe);var Se=i(pe,2),me=a(Se),cs=a(me);t(me);var De=i(me,2),bs=a(De);t(De),t(Se),t(ue);var Oe=i(ue,2);{var js=b=>{var T=st(),U=i(a(T),2),F=a(U);Je(F,()=>e(J)),t(U),t(T),p(b,T)};z(Oe,b=>{e(J)&&b(js)})}var _s=i(Oe,2);{var fs=b=>{var T=rt(),U=a(T),F=a(U);{var ms=N=>{var B=tt(),G=i(a(B));K(G,5,()=>e(q),Q,(ge,ye)=>{ve(ge,{get info(){return e(ye)}})}),t(G),t(B),p(N,B)};z(F,N=>{e(q)&&N(ms)})}var hs=i(F);{var zs=N=>{var B=at(),G=i(a(B));K(G,5,()=>e(A),Q,(ge,ye)=>{ve(ge,{get info(){return e(ye)}})}),t(G),t(B),p(N,B)};z(hs,N=>{e(A)&&N(zs)})}t(U),t(T),p(b,T)};z(_s,b=>{(e(q)||e(A))&&b(fs)})}t(P),t($);var Ue=i($,2),he=a(Ue),ze=a(he),us=a(ze);t(ze);var ps=i(ze,2);Zs(ps,{get checked(){return e(V)},set checked(b){k(V,b)},$$legacy:!0}),t(he);var Ee=i(he,2);K(Ee,5,()=>e(c),Q,(b,T)=>{Ys(b,{get media(){return e(T)},downloadable:!0,get currentMedia(){return e(d)},set currentMedia(U){k(d,U)},$$legacy:!0})}),t(Ee),t(Ue),t(u),W((b,T,U,F)=>{w(fe,(e(d),o(()=>e(d).title??"üò∂‚Äçüå´Ô∏è"))),O.autoplay=e(V),Te(O,"src",b),Te(O,"poster",(e(d),o(()=>e(d).thumbnail))),Z(P,`border-left-color: ${e(s),o(()=>e(s).sessionTypeColor)??""}`),Z(ae,`color: ${e(s),o(()=>e(s).sessionTypeColor!=="#000000"?e(s).sessionTypeColor:"#dfdfdf")??""}`),w(ds,(e(s),o(()=>e(s).sessionType))),w(ns,(e(s),o(()=>e(s).title))),w(cs,`üóìÔ∏è ${T??""}`),w(bs,`${U??""}
									${F??""}`),w(us,`Liste de lecture (${e(c),o(()=>e(c).length)??""}):`)},[()=>(e(d),o(()=>Ge(e(d)))),()=>(ie(oe),e(s),o(()=>oe(e(s).start?.split("T")[0]))),()=>(ie(le),e(s),o(()=>le(e(s).start?.split("T")[1].split("+")[0]))),()=>(e(s),o(()=>e(s).start?.split("T")[1].split("+")[0]+" - "+e(s).end?.split("T")[1].split("+")[0]))]),He("play",O,()=>Ke(e(d))),He("ended",O,()=>Qe(e(d))),p(f,u)};z(I,f=>{e(c),o(()=>e(c).length>0)&&f(ce)})}var ee=i(I,2),be=a(ee),se=a(be),ts=a(se,!0);t(se);var je=i(se,2),as=a(je,!0);t(je);var xe=i(je,2),_e=a(xe),rs=a(_e);t(_e);var Ie=i(_e,2),is=a(Ie);t(Ie),t(xe),t(be);var Re=i(be,2);{var os=f=>{var u=ot(),$=i(a(u),2),E=a($);Je(E,()=>e(J)),t($),t(u),p(f,u)};z(Re,f=>{e(J)&&f(os)})}var ls=i(Re,2);{var vs=f=>{var u=dt(),$=a(u),E=a($);{var X=R=>{var S=lt(),D=i(a(S));K(D,5,()=>e(q),Q,(O,P)=>{ve(O,{get info(){return e(P)}})}),t(D),t(S),p(R,S)};z(E,R=>{e(q)&&R(X)})}var te=i(E);{var fe=R=>{var S=vt(),D=i(a(S));K(D,5,()=>e(A),Q,(O,P)=>{ve(O,{get info(){return e(P)}})}),t(D),t(S),p(R,S)};z(te,R=>{e(A)&&R(fe)})}t($),t(u),p(f,u)};z(ls,f=>{(e(q)||e(A))&&f(vs)})}t(ee),W((f,u,$)=>{Ls(ee,1,`detail screen-small ${e(c),o(()=>e(c).length==0?"no-media":"")??""}`,"svelte-1jobjz3"),Z(ee,`border-left-color: ${e(s),o(()=>e(s).sessionTypeColor)??""}`),Z(se,`color: ${e(s),o(()=>e(s).sessionTypeColor!=="#000000"?e(s).sessionTypeColor:"#dfdfdf")??""}`),w(ts,(e(s),o(()=>e(s).sessionType))),w(as,(e(s),o(()=>e(s).title))),w(rs,`üóìÔ∏è ${f??""}`),w(is,`${u??""}
						${$??""}`)},[()=>(ie(oe),e(s),o(()=>oe(e(s).start?.split("T")[0]))),()=>(ie(le),e(s),o(()=>le(e(s).start?.split("T")[1].split("+")[0]))),()=>(e(s),o(()=>e(s).start?.split("T")[1].split("+")[0]+" - "+e(s).end?.split("T")[1].split("+")[0]))]),p(n,r)};z(es,n=>{!e(y)&&e(s)&&n(ss)})}t(de),W(()=>Te(Ce,"href",`${Fe??""}/`)),p(l,de),Xe(),M()}export{gt as component};
